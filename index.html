<!DOCTYPE html>
<html>
 <head>
 <title>截屏保存</title> 
 <meta charset="utf-8" /> 
<style>
    * {
        margin: 0;
        padding: 0;
    }
    .wrapInnder{
		position: relative;
	}
   .test{
	   border:1px solid #eee;
	   width: 600px;
	   height: 400px;
	   color: #333;
	   font-size: 30px;
	   margin-top: 40px;
   }
   #shareImg{
	   width: 600px;
	   height: 400px;
	   position: absolute;
	   top: 0;
	   
   }
    #shareImg img{
	 width: 100%;  
   }
   
</style>

</head> 
 <body>
<div class="wrapInnder">
	<div  class="test">
	    截屏内容
	</div>
	<div id="shareImg">
		
	</div>
</div>

 </body>
</html>
<script type="text/javascript" src="jquery-3.3.1.min.js"></script>
<script type="text/javascript" src="html2canvas.js"></script>
<script type="text/javascript" src="canvas2image.js"></script>
<script type="text/javascript">
    var test = $(".test").get(0); //将jQuery对象转换为dom对象
	 html2canvas(test).then(function(canvas) {
		 // canvas宽度
		 var canvasWidth = canvas.width;
		 // canvas高度
		 var canvasHeight = canvas.height;
		 var img = Canvas2Image.convertToImage(canvas, canvasWidth, canvasHeight);
		 var imageUrl = img.src
		// saveAs(imageUrl)
		 var image = new Image();
		          image.src =imageUrl;
		          document.getElementById('shareImg').appendChild(image);

	 });
	 
	 var triggerEvent = "touchstart"; //指定下载方式
	  
	 function saveAs(Url){
	     var blob=new Blob([''], {type:'application/octet-stream'});
	     var url = URL.createObjectURL(blob);
	     var a = document.createElement('a');
	     a.href = Url;
	     a.download = Url.replace(/(.*\/)*([^.]+.*)/ig,"$2").split("?")[0];
	     var e = document.createEvent('MouseEvents');
	     e.initMouseEvent('click', true, false, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);
	     a.dispatchEvent(e);
	     URL.revokeObjectURL(url);
	 }
	  
	
</script>
